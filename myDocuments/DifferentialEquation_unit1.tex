\section{Introduction to differential equations and modeling}
\subsection{A secret Function}
\begin{ex}
  Can you guess my secret function $y(t)$?
\end{ex}
\paragraph{Clue} It satisfies the differential equation \\
\begin{equation*}
  \dot{y} = 3y,
\end{equation*}
which could model population growth in some biological system, like the growth of yeast cells.
Note that \emph{\color{blue} $\dot{y}$} is common notation for the derivative with respect to time;
$\dot{y}$, $y'$, and $\frac{dy}{dt}$ all mean the same thing here.\\
$y = e^{3t}$ is a solution to the differential equation above because substituting it into the DE gives
$3e^{3t}=3e^{3t}$. But it's not the function I was thinking of! Some other solutions are
$y = 7e^{3t}$, $y = -5e^{3t}$, $y = 0$, etc. From calculus we know that the family of functions
\begin{equation*}
  y = ce^{3t}
\end{equation*}
is the \emph{\color{blue} general solution}.
\begin{itemize}
\item for each $c$, the function $y=ce^{3t}$ is a solution, and
\item there are no other solutions besides these.
\end{itemize}
So there is a 1-parameter family of solutions to this DE.
The constant $c$ is a \emph{\color{blue} parameter}.

\paragraph{Clue 2:} The function satisfies the \emph{\color{blue} initial condition} $y(0)=5$.
\begin{align*}
  y(0) &= ce^{0} \\
  5 &= c  
\end{align*}
\emph{The solution} satisfying the initial condition $y(0) = 5$ is
\begin{equation*}
  y(t) = 5e^{3t}
\end{equation*}
\begin{mydef}
  An \emph{\color{blue} initial value problem}
  is a differential equation together with initial conditions.
\end{mydef}

\emph{\color{orange} Important} Checking a solution to a DE is usually easier
than finding the solution in the first place, so it is often worth doing.
Just plug in the function to both sides, and also check that it satisfies the initial condition.\\

In the solution to the DE, only one initial condition was needed,
since only one parameter $c$ needed to be recovered.
\clearpage

\subsection{Cell division}
Here we will see how the differential equation for our secret function appears when modeling a natural phenomenon - the population growth of a colony of cells.\\

In this example we'll model the number of yeast cells in a batch of dough.
As we work through this example, pay careful attention to the assumptions we make, and how the \emph{\color{blue} initial condition} plays a role in the resulting differential equation.

\subsubsection{\color{blue} The system}
For our system, we assume we have a colony of yeast cells in a batch of bread dough.
The first step is to identify the variables, the units, and give them names.
\begin{align*}
  y\qquad &\text{number of cells}\\
  t\qquad &\text{time measured in seconds}
\end{align*}
We also need to set some initial condition, $y_0$, the number of cells that we begin with at $t=0$.
In this system, this might be the number of yeast cells in a yeast packet.
\subsubsection{\color{blue} A differential model}
If $y$ denotes the number of yeast cells, what can we say about the derivative $\dot{y}$?
The derivative represents the rate at which the number of cells is growing.
How should it depend on the number of cells?
In nature, cells given plenty of space and food tend to divide through mitosis regularly.
If we assume that each cell is dividing independently of all other cells, then doubling the number of cells should double the rate at which new cells are born.
In fact, multiplying the number of cells by any scalar factor should do the same to the derivative.
So this directly implies that the growth rate of cells is proportional to the number of cells:

\begin{equation*}
  \dot{y} \propto y.  
\end{equation*}
We can make this into a true equation by simply inserting a proportionality constant $a$, such that
\begin{equation*}
  \dot{y} = ay. 
\end{equation*}
We say that $1/a$ is a ``characteristic'' timescale for our problem, setting the rate at which the cells divide. A solution to the above differential equation is
\begin{equation*}
  y = y_0e^{at},
\end{equation*}
where $y_0$ is the number of yeast cells we started with at $t=0$.
In our case, we assume that $y_0$ is the number of yeast cells in a packet, which is about $180$ billion yeast cells.
\clearpage

\subsection{Classification of differential equations:}
There are two kinds:
\begin{itemize}
\item An \emph{\color{blue} ordinary differential equation (ODE)}  involves derivatives of a function of \emph{only one} variable.
\item A \emph{\color{blue} partial differential equation (PDE)} involves \emph{partial derivatives} of a \emph{multivariable} function.
\end{itemize}

Here we will study ordinary differential equations. In \textit{Fourier Series and PDEs}, we will study partial differential equations. When we consider ODEs, we will often regard the independent variable to be time.\\

Notation for higher derivatives of a function $y(t)$:
\begin{align*}
  \text{first derivative: } \qquad  &\dot{y}\qquad y'\qquad \frac{dy}{dt}\\
  \text{second derivative: } \qquad  &\ddot{y}\qquad y''\qquad \frac{d^2y}{dt^2}\\
  \text{third derivative: } \qquad  &y^{(3)}\qquad \qquad \frac{d^3y}{dt^3}\\
                                    &\centerdot \\
                                    &\centerdot \\
                                    &\centerdot \\
  n^{th} \text{derivative: } \qquad &y^{(n)}\qquad \qquad \frac{d^ny}{dt^n}                              
\end{align*}

\emph{\color{orange} Warning: } The dot notation $\dot{y}$ should only be used to refer to a time derivative. If for example $y$ is a function of a spacial variable $y=y(x)$, we will only use the notation $y'$ to denote the derivative with respect to $x$.\\

\begin{mydef}
  The \emph{\color{blue} order} of a DE is the highest $n$ such that the $n^{th}$ derivative of the function appears.
\end{mydef}
\begin{ex}
  is 
\end{ex}
\begin{align*}
  \displaystyle  \displaystyle 9375 \cos (t^5) \, \ddot{y}^4 + 982 (y + t^3)^7 \,
  \dot{y} - 387 y^{(3)} y^{(4)} + 2t y^{(5)} \\
  \displaystyle {}=- 30987\sqrt {y}+ 4087 \sin (t/y) + 7092 \ln (1- t^7) + 3786 e^{y^8 - t^3} + 18.031 \,
\end{align*}
an ODE or a PDE?
\begin{mybox}{gray}{Answer}
  There is only only one dependent variable $y$ and independent variable $y$, So ODE.  
\end{mybox}
\clearpage

\begin{problem}
  Order of differential equation 
\end{problem}
What is the order of the differential equation in the above example?
\begin{mybox}{gray}{Answer}
  The highest $n$ is such that $n^{th}$ derivative of $y$ is $y^{(5)}$. 
\end{mybox}
\clearpage

\subsection{More terminology}
\begin{enumerate}
\item A \emph{\color{blue} homogeneous linear ODE} is a differential equation such as
  \begin{equation*}
    e^ t \,  {\color{blue}{\ddot{y}}}  + 5 \,  {\color{blue}{\dot{y}}}  + t^9 \,  {\color{blue}{y}}  = 0
  \end{equation*}
  in which each summand is a function of $t$ times one of $\color{blue}{\ddot{y}}$,
  $\color{blue}{\dot{y}}$, $\color{blue}{\dot{y}}$, $\centerdot$ $\centerdot$  $\centerdot$
  \textbf{Most general} $n^{th}$ \textbf{order homogeneous linear ODE:}
  \begin{equation*}
    p_ n(t) \,  {\color{blue}{y^{(n)}}}  + p_{n-1}(t) \,  {\color{blue}{y^{(n-1)}}}  \dotsc + p_1(t) \,  {\color{blue}{\dot{y}}}
    + p_0(t) \,  {\color{blue}{y}}  = 0
  \end{equation*}
  for some function $p_n(t), \cdots, p_0(t)$ called the {\color{blue}{coefficient}}.
\item An \emph{\color{blue} inhomogeneous linear ODE} is the same except that it has also
  \emph{\color{orange} one term that is a function of $t$ only} . \\
  For example,
  \begin{equation*}
    e^ t \,  {\color{blue}{\ddot{y}}}  + 5 \,  {\color{blue}{\dot{y}}}  + t^9 \,
    {\color{blue}{y}}  = {\color{orange}{7 \sin t}}
  \end{equation*}
  is a second-order inhomogeneous linear ODE.\\
  \textbf{Most general $n^{th}$ order inhomogeneous linear ODE:}
  \begin{equation*}
    p_ n(t) \,  {\color{blue}{y^{(n)}}}  + p_{n-1}(t) \,  {\color{blue}{y^{(n-1)}}}  \dotsb + p_1(t) \,
    {\color{blue}{\dot{y}}}  + p_0(t) \,  {\color{blue}{y}}  = {\color{orange}{q(t)}}
  \end{equation*}
  for some functions $p_n(t), \cdots , p_0(t), {\color{orange}, q(t)}$. \\
\item A \textbf{\color{blue} linear ODE} is an ODE that can be rearranged into either of the two types above.
\item Either of the two forms above can be reduced further by dividing the entire DE by $p_n(t)$,
  the coefficient of the highest derivative $y^{(n)}$ becomes 1.
  A differential equation written in either of the two forms above but with leading coefficient $1$ is said to be in standard linear form .
  \begin{align*}
    &{\color{blue}{y^{(n)}}}  + p_{n-1}(t) \,  {\color{blue}{y^{(n-1)}}}  \dotsb + p_1(t) \,
    {\color{blue}{\dot{y}}}  + p_0(t) \,  {\color{blue}{y}}  = 0\\
    &{\color{blue}{y^{(n)}}}  + p_{n-1}(t) \,  {\color{blue}{y^{(n-1)}}}  \dotsb + p_1(t) \,
    {\color{blue}{\dot{y}}}  + p_0(t) \,  {\color{blue}{y}}  = {\color{orange}{q(t)}}
  \end{align*}
\end{enumerate}

\begin{remark}
  We insist that solutions $y(t)$ are defined on an entire open interval $I$, as opposed to disjoint intervals.
  We will always assume the functions $p_n(t), p_{nâˆ’1}(t), \cdots, p_0(t), q(t)$ are well behaved,
  for example continuous, on $I$.
  (We'll look at more complicated functions in our class Transfer Functions and the Laplace Transform.)
\end{remark}

\begin{mybox}{gray}{What is open interval?}
  An \textbf{\color{blue} open interval} is a connected set of real numbers without endpoints.
  The notation $(a, b)$ denotes the open interval of all points $x$ such that $a < x < b$.
  It is conventional to allow one or both end points to be infinite:
  $(a, b)$, $(- \infty, b)$, $(a, \infty)$.
  The open interval $(-\infty, \infty)$ denotes the entire real line,
  which is often denoted by $\mathbb{R}$.
\end{mybox}

\begin{remark}
  If you already know that an ODE is linear, there is an easy test to decide if it is homogeneous or not:
  Plug in the constant function $y=0$.
\end{remark}
\begin{itemize}
\item if $y = 0$ is a solution, the ODE is homogeneous.
\item if $y = 0$ is not a solution, the ODE is inhomogeneous. 
\end{itemize}

\begin{remark}
  The cell division example gives us a homogeneous equation.
  If you start with no yeast cells, the population stays at $0$.
\end{remark}
For an ODE to be {\color{blue}nonlinear}, the functions $y, \dot{y},\cdots $ must enter the equation in a more complicated way: raised to powers, multiplied by each other, or with nonlinear functions applied to them.

\begin{problem}
  Liner vs. nonlinear concept check
\end{problem}
Which of the following ODEs are linear?
\begin{enumerate}
\item $\ddot{y} -7ty \dot{y} = 0$
\item $\ddot{y} = e^t (y+t^2)$
\item $\dot{y} - y^2 = 0$
\item $\dot{y}^2 - t y = \sin t$
\item $\dot{y} = \cos (y+t)$
\end{enumerate}

\begin{mybox}{gray}{Answer}
  $\ddot{y} -7ty \dot{y} = 0$, $7ty \dot{y}$ multiplied by each other.\\
  $\ddot{y} = e^t (y+t^2)$ is standard linear form. \\
  $\dot{y} - y^2 = 0$, $y^2$ is raised powers.\\
  $\dot{y}^2 - t y = \sin t$, $\dot{y}^2$ is raised powers. \\
  $\dot{y} = \cos (y+t)$, $\cos (y+t)$ with nonlinear function applied.   
\end{mybox}
\clearpage

\subsection{Natural growth and decay equations}
We've been introduced to a few basic forms of differential equations so far.
The first equation we saw was a basic growth equation,
\begin{equation*}
  \dot{y} = ay, 
\end{equation*}
which, when $a$ is a positive constant, governs systems like bank accounts and cell populations.
If we put a negative sign in front of $a$ we get the decay equation
\begin{equation*}
  \dot{y} = -ay, 
\end{equation*}
which can be used to describe things like radioactive decay of materials.
\begin{problem}
  Classification of ODEs concept check
\end{problem}
How would you classify the differential equations $\dot{y} = ay$ and
$\dot{y} = âˆ’ay$ just discussed?
\begin{mybox}{gray}{Answer}
  $\dot{y} = âˆ’ay$ rearranged
  \begin{align*}
    \dot{y} - ay = 0, \\
    \dot{y} + ay = 0\\
  \end{align*}
  $\dot{y}$ first order, only one term of $y$ linear and homogeneous ODE.   
\end{mybox}
\clearpage

\subsection{Introduction to modeling}
There are two kinds of modeling.
We're not going to talk about the kind that involves fancy clothes and photographs.
The other kind, mathematical modeling , is converting a real-world problem into mathematical equations.\\
Guideline: 
\begin{enumerate}
\item Identify relevant quantities, both known and unknown, and give them symbols. Find the units for each.
\item Identify the independent variable(s).
  The other quantities will be functions of them, or constants. Often \textbf{time} is the only independent variable.
\item Write down equations expressing how the functions change in response to small changes in the independent variable(s).
  Also write down any â€œlaws of nature" relating the variables.
  As a check, make sure that all summands in an equation have the same units.
\end{enumerate}
Often simplifying assumptions need to be made;
the challenge is to simplify the equations so that they can be solved but so that they still describe the real-world system well.\\
(Once we have the language of input signals and system response, we'll refine these guidelines.)
\subsubsection{Model of a savings account}
\begin{ex}
  I have a savings account earning interest compounded daily,
  and I make frequent deposits or withdrawals into the account.
  Find an ODE with initial condition to model the balance.
\end{ex}
\textbf{\color{blue} Simplifying assumptions:}
\begin{itemize}
\item Daily compounding is almost the same as continuous compounding, so let's assume that interest is paid continuously instead of at the end of each day.
\item Similarly, let's assume that my deposits/withdrawals are frequent enough that they can be approximated by a continuous money flow at a certain rate, the {\color{blue}net deposit rate}
  (which is negative when I am withdrawing).
\end{itemize}
\textbf{\color{blue} Variables and functions(with unis): } Define the following:
\begin{align*}
  &P \qquad \text{the initial amount that the account starts with (\textit{dollars})} \\ 
  &t \qquad \text{time from the start \textit{years}} \\
  &x \qquad \text{balance \textit{dollars}} \\
  &I \qquad \text{Interest rate}  (year^{-1}; \text{for example} 4\%/year = 0.04yesr^{-1}) \\
  &q \qquad \text{the net deposit rate} (dollars/yes).
\end{align*}
Here $t$ is the independent variable, $P$ is a constant, and $x$, $I$, $q$ are functions of $t$. \\
\textbf{\color{blue} Equations:} Now we want to decide how the balance changes as time changes.
We'll estimate the change in the balance $\Delta x$ as time increases from some time $t$
to a time $t+ \Delta t$. We can approximate the interest earned per dollar to be:
\begin{equation*}
  \displaystyle \text{interest earned {\color{orange}per dollar }}  \approx I(t) \Delta t 
\end{equation*}
The balance in the account at time $t$ is $x(t)$.
Therefore, the total interest earned from time $t$ to $t + \Delta t$  is approximately
\begin{equation*}
  \displaystyle \text{net amount deposited into the account} \approx q(t) \Delta t 
\end{equation*}
Putting it all together, the change in balance is
\begin{align*}
  \displaystyle &\Delta x = \qquad \approx I(t) x(t) \Delta t + q(t) \Delta t \\
  \displaystyle &\Longrightarrow \frac{\Delta x}{\Delta t} \approx I(t) x(t) + q(t).
\end{align*}
The smaller $\Delta t$ is, the better the approximation becomes, and in the limit as $\Delta t \to 0$
\begin{equation*}
  \displaystyle  \lim \limits _{\Delta t\rightarrow 0}\frac{\Delta x}{\Delta t}=\frac{dx}{dt}.
\end{equation*}
This yields the {\color{orange} differential equation}
\begin{equation*}
  \displaystyle  \frac{dx}{dt}=I(t)x(t)+q(t).
\end{equation*}
Note that the units in each of the three terms are $dollars/year$.
Also, there is the initial condition $x(0)=P$.
Thus we have an ODE with initial condition:
\begin{equation*}
  \displaystyle \dot{x} = I(t)x + q(t), \qquad x(o) = P
\end{equation*}

\begin{remark}
  The notation we chose suggested that the interest rate $I$ depended only on time.
  However, I could have depended on $x$ as well.
  This would not change the modeling process.
  If I does not depend on $x$, we obtain a linear differential equation.
  If it does, the equation is nonlinear.
\end{remark}
\clearpage

\subsubsection{Application: mixing salt water solution} 
Now suppose we want to set up an experiment on ocean fish.
\begin{figure}[ht!]
  \centering
  \includegraphics[width=0.5\textwidth]{image-WaterTank}
  \caption{Image of Water Tank}
  \label{fig:tank}
\end{figure}
These fish typically live in saltwater that contains a salt concentration of 34 grams per liter.
To make their environment, we're going to start with a tank that contains fresh water, with the volume going by $v$ of $t$.
We're going to hook up a pipe that allows a continuous flow of a concentrated salt solution
to enter the tank.
And then we'll also have a pipe that allows for drainage from the tank. \\
So let's give some numbers to these quantities so we can solve this problem.
\begin{align*}
  \text{Given : } &\qquad 800L (\text{ flash water}) \\
  \text{flow in : } &\qquad 5 Liter/min , \text{concentration } 75 g/L \\
  \text{flow out : } &\qquad 3 Liter/min 
\end{align*}
we're going to assume that the fluid inside the tank is instantaneously well mixed.
The Goal is model the change in salt concentration over time.\\
\emph{Guidelines :}
\begin{enumerate}
\item Identify relevant quantities.
  \begin{align*}
    t &\qquad \text{Time in minutes} (min) \\    
    v &\qquad \text{total liters fluid in tank} (L/min) \\
    x &\qquad \text{Total number of salt in the tank} (g/L) \\
  \end{align*}
  The concentration is
  \begin{equation*}
    \displaystyle concentration = \frac{x(t)}{v(t)}. 
  \end{equation*}
\item Identify the independent variable.\\
  The independent variable is time in minutes$t$.
\item Write down equations. \\
  The concentration $\displaystyle \frac{x(t)}{v(t)}$, both numerator and denominator are change
  over time, which makes this quantity really complicated to model.
  Instead, it turns out it's much easier to just think about modeling $x$ of $t$ alone
  and then dividing by an expression for $v$ of $t$.
  \begin{equation*}
    \displaystyle \frac{dx}{dt} = \text{Rate in} - \text{Rate out}
  \end{equation*}
  The rate of salt enter in is
  \begin{equation*}
    \displaystyle \text{Rate in } = (75 \frac{g}{L}) \cdot (5 \frac{L}{min}) = 375 \frac{g}{min},
  \end{equation*}
  and the rate of salt out is
  \begin{equation}
    \label{eq:1}
    \displaystyle \text{Rate out} = \text{concentration of existing fluid in} \cdot 3 \frac{L}{min} 
  \end{equation}
  What is the concentration of existing fluid in is?
  This is where we use the assumption that the fluid inside the tank is instantaneously well mixed.
  We said that concentration is $\displaystyle \frac{x(t)}{v(t)}$.
  And since we're ignoring complicated mixing dynamics, we're going to assume that this is true everywhere
  instantaneously in the tank.
  Specifically, it's true where the fluid is exiting the tank.
  And so we can say that the concentration of {\color{orange}the exiting fluid} is
  $\displaystyle \frac{x(t)}{v(t)}$ grams per liter.
  But we can also write down an expression for $v$ of $t$.
  \begin{equation*}
    \displaystyle v(t) = 800 L + (5 \frac{L}{min} - 3 \frac{L}{min}) \cdot t\\
     = 800 + 2t [L] \\
  \end{equation*}
  We substitute this into \ref{eq:1} is 
  \begin{equation*}
    \displaystyle \text{Rate out} = \frac{x(t)}{800 + 2t} \cdot 3 \frac{L}{min}.  
  \end{equation*}
  So our DEs is
  \begin{align*}
    \displaystyle \frac{dx}{dt} &= \text{Rate in} - \text{Rate out} \\
    \displaystyle \frac{dx}{dt} &= 375 - \frac{3x}{800 + 2t}, 
  \end{align*}
  is fist linear inhomogeneous DEs. 
\end{enumerate}
\clearpage

\subsubsection{Systems and signals}
Let's get back to the savings account model:
\begin{equation*}
  \displaystyle \dot(x) = I(t)x + q(t). 
\end{equation*}
Maybe for financial planning I am interested in testing different saving strategies (different functions q) to see what balances $x$ they result in.
To help with this, rewrite the ODE as
\begin{equation*}
  \underset {{\color{orange}{\text {controlled by bank}}} }{\dot{x} - I(t) x} =
  \underset {{\color{blue}{\text {controlled by me}}} }{q(t).}
\end{equation*}
In the â€œsystems and signals" language of engineering, $q$ is called the \textbf{input signal},
the bank is the system , and $x$ is the \textbf{output signal}.
These terms do not have a mathematical meaning dictated by the DE alone;
their interpretation is guided by the system being modeled. But the general picture is this:
\begin{figure}[ht!]
  \centering
  \includegraphics[width=0.6\textwidth]{images_ISR}
  \caption{Systems and Signals}
  \label{fig:SIR}
\end{figure}
We'll see many examples that model phenomena using this input/system response language.
\begin{itemize}
\item The \textbf{system} may be a mechanical system such as an automobile suspension or an electrical circuit, or an economic market.  It is impacted by some external signal.
  We are interested in understanding how the system responds to the external stimulus.
\item The \textbf{\color{blue} input signal} is the external stimulus.
  It usually does not appear in as simple a way in the DE as it does in the example above.
  But it does always determine the right hand side of the DE (when written in standard linear form).
\item The \textbf{\color{orange} system response} (also called \textbf{\color{orange} output signal} ) is the measurable behavior of the system that we are interested in.
  It is always the unknown function that we write a differential equation for.
\end{itemize}
\clearpage

\subsubsection{Newtonian mechanics}
One of the most important sources for differential equations comes from Newton's second law
\begin{equation*}
  \displaystyle  F \qquad = \qquad ma. 
\end{equation*}
That is, force equals mass times acceleration. This is a differential equation! For now we restrict our attention to 1-dimensional systems.
The acceleration $a$ is the second time derivative of position $x$, which is ${\color{blue} \ddot{x}}$. Thus we can rewrite the equation as
\begin{equation*}
  \displaystyle F \qquad = \qquad m{\color{blue} \ddot{x}}
\end{equation*}
What is creating that force?
The force depends on the system we are modeling.
We will start with a very simple toy model that will serve as the basis for almost every other model we will encounter in this course.
\begin{ex}
  Model a spring attached to a wall, with a mass on the other end sitting on a cart that moves without friction.
  We pull the cart back and release it. How does the mass on the cart behave?
\end{ex}

\textbf{\color{orange} Solution: } To begin the modeling process, let's \textbf{\color{blue}draw a diagram}.
\begin{figure}[ht!]
  \centering
  \includegraphics[width=0.5\textwidth]{images_hanging-mass}
  \caption{Hanging Mass}
\end{figure}
Next, let's \textbf{\color{blue} label the elements of interest} in the diagram.
We have the mass $m$, and the strength of the spring $k$, which appears in Hooke's law.\\

The variable of interest is the position of the mass.
What do we mean by the position of the mass?
The most natural way to record the position of the mass is to consider the displacement of the mass ${\color{blue} x}$ away from the position when the spring is relaxed ${\color{blue}x}=0$.
We also have to decide on the sign, so we choose $x > 0$ when the spring is stretched,
which is sensible given our picture.
\clearpage
\begin{figure}[ht!]
  \centering
  \includegraphics[width=0.5\textwidth]{images_hanging-mass-displacement}
  \caption{Hanging Mass Displacement}
\end{figure}
Let's try to put this into the \textbf{input/ system response} paradigm we've just introduced.
The system response is the displacement of the mass. This is what we are interested in.\\

What is the input signal?
You could imagine that there are other forces acting on the mass, like there is a sail on the mass,
and wind is blowing on the sail creating an input signal.
But we are going to start by considering the case where the input signal is $0$.
Note that pulling the cart back and releasing it specifies the initial state of the system,
that is, it gives the initial conditions.\\

Now we are ready to \textbf{\color{blue} write down the differential equation}.
The equation is governed by Newton's second law
\begin{equation*}
  \displaystyle F = m {\color{blue} \ddot{x}}
\end{equation*}
We need to identify the forces acting on the mass.
There is the force due to the spring.
For the moment, we assume that air resistance is negligible, and there is no friction on the cart.\\

What is the spring force?
When the displacement is positive, the spring is stretched, the force is negative.
When the displacement is negative, the spring is compressed, the force is positive.
Thus this force is modeled linearly by Hooke's law
\begin{equation*}
  \displaystyle F \quad = \quad -{\color{orange}k} {\color{blue}x}
\end{equation*}
which is a function of the displacement ${\color{blue} x}$ away from the neutral position ${\color{blue} x} = 0$.
Note that this linear model is only valid for relatively small displacements.
If we stretch the spring too far, the spring force won't obey this linear law anymore.\\

The position at time $t = 0$ is $x(0) = x_0$ for some positive displacement $x_0 > 0$.
From the problem statement, we assume that we release the cart with zero initial velocity, $\dot{x}(0) = 0$.\\

Putting this all together, we get
\begin{equation*}
  \displaystyle -{\color{orange}k} {\color{blue}x} = m {\color{blue} \ddot{x}}
\end{equation*}
with initial conditions
\begin{equation*}
  x(0) = 0, \qquad \dot{x}(0) = 0
\end{equation*}
The last step is to \textbf{write this in standard linear form}.
We obtain the following differential equation
\begin{align*}
  &\displaystyle m {\color{blue} \ddot{x}} + {\color{orange}k} {\color{blue}x} = 0\\
  &\displaystyle x(0) = 0, \qquad \dot{x}(0) = 0
\end{align*}
\begin{ex}
  Now let's consider the same mass/spring system as above where we've add a sail to the mass.
\end{ex}

\begin{figure}[ht!]
  \centering
  \includegraphics[width=0.5\textwidth]{images_hanging-mass-labels}
  \caption{Hanging Mass add Sail}
\end{figure}
The mass now experiences an additional external force from the wind.
How does this change the model?\\
\textbf{\color{orange} Solution: } The model is exactly the same.
The only difference is that the input signal is no longer zero, rather it is now the external force due to the wind on the sail.
This external force $\displaystyle F_{\text {wind}}(t)$ depends on time in some complicated way that we will not try to write down. The differential equation for this system is
\begin{equation*}
  \displaystyle m {\color{blue} \ddot{x}} + {\color{orange}k} {\color{blue}x}
  =  F_{\text {wind}}(t)
\end{equation*}
with initial conditions
\begin{equation*}
  x(0) = 0, \qquad \dot{x}(0) = 0
\end{equation*}

\begin{problem}
  How would you classify the differential equation $\displaystyle m\ddot x + k x = F_{\text {wind}}(t)$
  modeling a mass/spring system with a sail just discussed? 
\end{problem}
\begin{mybox}{gray}{Answer}
  The highest term of only dependent variable is $\ddot x$ second order. \\
  Following standard form of  $\ddot y + p(t)y = q(t)$, so inhomogeneous.\\
  There is no complex term of $x$ means linear.\\
  The answers is linear \footnote{Even if $m$ and $k$ depend on $t$, the differential equation is still linear.
    On the other hand, if $m$ and $k$ depend on $x$, the equation is nonlinear.}
  second order inhomogeneous DEs.\\
\end{mybox}

\subsubsection{ 5 step modeling process}
In the example on the previous page, we outlined a 5 step modeling process that we make explicit here.
\begin{enumerate}
\item Draw a diagram of the system.
\item Identify and give symbols for the parameters and variables of the system.
\item Decide on the input signal and the system response. Identify any initial conditions.
\item Write down a differential equation relating the input signal and the system response.
\item Rewrite the equation in standard linear form with initial conditions.
\end{enumerate}
\clearpage

\subsection{Recitation 1, Modeling Natural population growth}
A certain African government is trying to come up with a good policy regarding
the hunting of oryx in a specific game preserve.
They are using the following model: the oryx population has a positive natural growth rate of
$k years^{âˆ’1}$, and there is assumed a constant harvesting rate of $a oryxes/year$.
\subsubsection{Modeling the oryx population}
\begin{problem}
  Modeling the population
\end{problem}
Write down a differential equation modeling the oryx population.\\
(Express your answers in terms of $k$, $a$ and $x$.)
\begin{mybox}{gray}{Answers}
  \begin{enumerate}
  \item Identify relevant quantities\\
    \begin{align*}
      \displaystyle x &\qquad \text{population of oryxes} &\quad  \text{oryxes} \\
      \displaystyle a &\qquad \text{a constant harvesting rate} &\quad  \frac{oryxes}{years} \\
      \displaystyle k &\qquad \text{a positive natural growth rate} &\quad  years^{-1}\\
    \end{align*}
  \item Identify the independent variables\\
    The $t$ is independent variables of time in year 
  \item Write down equation\\
    Natural growth of the oryx population is
    \begin{equation*}
      \displaystyle \text{the oryx population} = k(\frac{1}{years}) x(oryxes) \Delta t(years). 
    \end{equation*}
    Amount of harvesting oryx is
    \begin{equation*}
      \displaystyle \text{harvesting oryx} = a(\frac{oryxes}{years}) \Delta t(years).
    \end{equation*}
    The population change of oryxes is
    \begin{align*}
      &\displaystyle \Delta x \approx kx \Delta t - a \Delta t \\
      &\displaystyle \Rightarrow \frac{\Delta x}{\Delta t} = kx - a\\
      &\displaystyle \lim \limits _{\Delta t\rightarrow 0}\frac{\Delta x}{\Delta t} = kx - a\\
      &\displaystyle \frac{dx}{dt} = kx - a
    \end{align*}
  \end{enumerate}
\end{mybox}
\clearpage
\begin{problem}
  Signals and systems
\end{problem}
Discuss this model using the language of signals and systems.\\
What is the input to the system?\\
What is the system response? \\
(Express your answers in terms of $k$, $a$ and $x$.)
\begin{mybox}{gray}{Answers}
  \begin{equation*}
    \displaystyle
    \underset {{\color{orange}{\text {controlled by natural}}} }{\dot{x} - kx} =
    \underset {{\color{blue}{\text {controlled by government}}} }{-a.}
  \end{equation*}
  \begin{itemize}
  \item The system input is $-a$
  \item The system response is $x$
  \end{itemize}
\end{mybox}

\begin{problem}
  No hunters?
\end{problem}
Suppose $a = 0$ (no hunters).
What is the doubling time, the time it takes for the population to double, in terms of $k$?
\begin{mybox}{gray}{Answer}
  The secret function $x$ satisfies $\dot x = kx$ is
  \begin{equation*}
    x = ce^{kt}, 
  \end{equation*}
  the constant $c$ can be any real number.\\
  At the time is $0$, the population of oryxes is $c$. The double population is $2c$, 
  \begin{equation*}
    \begin{aligned}
      &2c = ce^{kt} \\
      &2 = e^{kt} \\
      &\ln 2 = \ln {e^{kt}}\\
      &\ln 2 = kt\\
      &t = \frac{\ln 2}{k}
    \end{aligned}
  \end{equation*}
  The doubling time $\displaystyle t = \frac{\ln 2}{k}$.  
\end{mybox}
By what multiplicative factor has the population increased after $k^{-1}$ years?
\begin{mybox}{gray}{Answer}
  After $k^{-1}$ years, $\displaystyle x(t + \frac{1}{k})$
  \begin{equation*}
    \begin{aligned}[t]
      \displaystyle \frac{x(t + \frac{1}{k})}{x(t)} &= \frac{ce^{k(t + k^{-1})}}{ce^{kt}} \\
      \displaystyle &= \frac{c(e^{kt}e)}{e^{kt}} \\
      \displaystyle &= e
    \end{aligned}
  \end{equation*}
\end{mybox}
\clearpage

\subsubsection{General solution}
\begin{problem}
  General solution
\end{problem}
Find the general solution of the equation you found in the first question. Check that the proposed solution satisfies the ODE.\\

(Express your answer in terms of $k$, $a$, $t$ and the initial oryx population $x0$.)
\begin{mybox}{gray}{Answer}
  The initial condition is $x(0) = x_0$,
  if my solution is $ x = ce^{kt} - a$, then
  \begin{equation*}
    \begin{aligned}[b]
      &\displaystyle \dot{x} = kx - a \\
      &\displaystyle kce^{kt} = kx - a \\
      &\displaystyle ce^{kt} = x - \frac{a}{k}  \\
      &\displaystyle x = ce^{kt} + \frac{a}{k} 
    \end{aligned}
  \end{equation*}
  Apply initial condition $x(0) = x_0$,
  \begin{equation*}
    \begin{aligned}[b]
      &\displaystyle x_0 = ce^{k\cdot 0} + \frac{a}{k} \\
      &\displaystyle x_0 = c + \frac{a}{k} \\
      &\displaystyle c  = x_0 - \frac{a}{k} \\
    \end{aligned}
  \end{equation*}
  So, the general solution is $\displaystyle (x_0 - \frac{a}{k})\cdot e^{kt} + \frac{a}{k}$. \\ 
  Check it by plug in DEs,
  \begin{equation*}
    \begin{aligned}[b]
      &\displaystyle ((x_0 - \frac{a}{k})\cdot e^{kt} + \frac{a}{k})'
      = k((x_0 - \frac{a}{k})\cdot e^{kt} + \frac{a}{k})) - a.\\
      &\displaystyle k*(x_0 + \frac{a}{k})e^{kt} = k*(x_0 + \frac{a}{k})e^{kt}
    \end{aligned}
  \end{equation*}
\end{mybox}

\begin{problem}
  Constant solution
\end{problem}
There is a constant solution. Find it.\\
What are the units of the expression you entered above? Do the units make sense?
\begin{mybox}{gray}{Answer}
  A constant solution means $\dot x = 0$.
  \begin{equation*}
    \begin{aligned}
      kx - a = 0 \\
      kx = a\\
      x = \frac{a}{k}
    \end{aligned}
  \end{equation*}
  The unit of k and a is $years^{-1}$ and $\displaystyle \frac{oryxes}{years}$.
  So, $\displaystyle \frac{a}{k} = \frac{oryxes}{years} \cdot years = oryxes$.
  It make sense that $x$ is a populations of oryxes.   
\end{mybox}

\begin{problem}
  Solution behavior
\end{problem}
Does the solution behave right when the harvesting rate $a$ is large or small? When $k$ is large or small?\\
Sketch the graphs for the case $k = .2$ and $a = 20$.
Sketch the constant solution, one solution whose initial population starts above the value of the constant solution, and one whose initial value is less than the value of the constant solution.

\begin{mybox}{gray}{Answer}
  The graph is \href{run:../source_code/recitation1.py}{recitation1.py}
\end{mybox}
\begin{figure}[ht!]
  \centering
  \includegraphics[width=0.5\textwidth]{images_population-sketch}
  \caption{Sketch of Oryxes Population}
\end{figure}

\begin{problem}
  The real-world situation is   
\end{problem}
Notice that for initial values less than the equilibrium,
the solutions stop having meaning in terms of the real-world situation they are modeling when they become negative.
In these cases, predict the time $t_e$ at which oryxes will be extirpated from this area.
For example, suppose that $x(0) =x_0$ is less than the equilibrium population.
For this initial condition, what is te? Check units.\\
(Express your answer in terms of $k$, $a$ and $x0$.)
\begin{mybox}{gray}{Answer}
  $t_e$ means $x = 0$, 
  \begin{equation*}
    \begin{aligned}[b]
      &\displaystyle (x_0 - \frac{a}{k})\cdot e^{kt} + \frac{a}{k} = 0 \\
      &\displaystyle (x_0 - \frac{a}{k})\cdot e^{kt} = -\frac{a}{k} \\
      &\displaystyle e^{kt} = \frac{-\frac{a}{k}}{x_0 - \frac{a}{k}} \\
      &\displaystyle e^{kt} = \frac{-a}{x_0 a - a} \\
      &\displaystyle \ln {e^{kt}} = \ln { \frac{-a}{x_0 a - a} } \\
      &\displaystyle k\cdot t =  \ln { \frac{-a}{x_0 a - a} }\\
      &\displaystyle t = \frac{1}{k} \ln { \frac{-a}{x_0 a - a} }
    \end{aligned}
  \end{equation*}
  The $\displaystyle t_e = \frac{1}{k} \ln { \frac{-a}{x_0 a - a} }$.  
\end{mybox}
\clearpage

\subsubsection{Solving first-order linear ODEs}
%%% Local Variables:
%%% mode: latex
%%% TeX-master: "NoteForDifferentialEquation"
%%% End:
